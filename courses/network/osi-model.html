<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#5397d2"><script>
      var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e772d8d7735057378a672ae311e9bf20";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
    </script><title>OSI 模型 | 众里千寻</title><meta name="description" content="对 OSI 模型进行概念性的说明"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.22">
    <link rel="preload" href="/assets/js/runtime~app.fa50ff6a.js" as="script"><link rel="preload" href="/assets/css/styles.e0095a00.css" as="style"><link rel="preload" href="/assets/js/3767.b5b9e7ce.js" as="script"><link rel="preload" href="/assets/js/app.8de2a662.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.e0095a00.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/hero-c.png" alt="众里千寻"><span class="site-name can-hide">众里千寻</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/courses/" class="nav-link router-link-active" aria-label="学习笔记"><!--[--><!--]--> 学习笔记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/solutions/" class="nav-link" aria-label="解决方案"><!--[--><!--]--> 解决方案 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/tools/" class="nav-link" aria-label="开发利器"><!--[--><!--]--> 开发利器 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/code-reading/" class="nav-link" aria-label="源码解读"><!--[--><!--]--> 源码解读 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/posts/" class="nav-link" aria-label="最新消息"><!--[--><!--]--> 最新消息 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/everfind" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/courses/" class="nav-link router-link-active" aria-label="学习笔记"><!--[--><!--]--> 学习笔记 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/solutions/" class="nav-link" aria-label="解决方案"><!--[--><!--]--> 解决方案 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/tools/" class="nav-link" aria-label="开发利器"><!--[--><!--]--> 开发利器 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/code-reading/" class="nav-link" aria-label="源码解读"><!--[--><!--]--> 源码解读 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/posts/" class="nav-link" aria-label="最新消息"><!--[--><!--]--> 最新消息 <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/everfind" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">OSI 模型</p><ul class=""><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#第一层-物理层" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="第一层：物理层"><!--[--><!--]--> 第一层：物理层 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#第二层-数据链路层" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="第二层：数据链路层"><!--[--><!--]--> 第二层：数据链路层 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#第三层-网络层" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="第三层：网络层"><!--[--><!--]--> 第三层：网络层 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#第二层和第三层的区别" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="第二层和第三层的区别"><!--[--><!--]--> 第二层和第三层的区别 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#第四层-传输层" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="第四层：传输层"><!--[--><!--]--> 第四层：传输层 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#第五、六、七层" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="第五、六、七层"><!--[--><!--]--> 第五、六、七层 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#封装与解封装" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="封装与解封装"><!--[--><!--]--> 封装与解封装 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/courses/network/osi-model.html#参考资料" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="参考资料"><!--[--><!--]--> 参考资料 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><blockquote><p>开放式系统互联模型（Open System Interconnection Model，简称为 OSI 模型），描述了互联网的功能组成。</p></blockquote><p>OSI 模型共分七层，如下图，每一层都实现了专有的功能，七层组合在一起，便实现了网络通信。</p><img src="/courses/network/osi-c.png" style="display:block;margin:0 auto;"><p>我们现在来看每一层的具体功能。</p><h2 id="第一层-物理层" tabindex="-1"><a class="header-anchor" href="#第一层-物理层" aria-hidden="true">#</a> 第一层：物理层</h2><p>物理层负责传输 0/1 比特流。</p><p>这一层负责处理两个网络节点之间的物理媒介，比如网线、WIFI。之所以命名为物理层，是因为这一层在上世纪 70 年代就已经被命名，那时候无线网络还未产生。</p><p>在物理层，数据的实际形式与传输的物理媒介息息相关。比如以太网，比特流是通过电脉冲传输的，而对于 WIFI 来说，比特流是通过无线电波传输的，对于光线来说，比特流是通过光脉冲传输的。</p><p><img src="/courses/network/physical-wires-c.png" alt="物理传输媒介"></p><p>另外，中继器和集线器也工作在物理层。</p><p>中继器将信号从一个媒介传输到另一个媒介，从而扩大信号的传输范围。比如大型 WIFI 网络的部署中，就需要中继器来扩大信号范围。</p><p>集线器是一个多端口中继器。如果一个集线器上连接有四个设备，一个设备上发出的数据将会被发送到另外三个设备上。</p><h2 id="第二层-数据链路层" tabindex="-1"><a class="header-anchor" href="#第二层-数据链路层" aria-hidden="true">#</a> 第二层：数据链路层</h2><p>数据链路层负责与物理层交互，换句话说，数据链路层负责将 0/1 比特流放进传输媒介，和从传输媒介中读取 0/1 比特流。</p><p>网卡（Network Interface Card，NIC）就是典型的数据链路层设备。不管是直接插网线的网卡还是 WIFI 网卡，都是从传输媒介中读写 0/1 比特流，区别仅仅是操作媒介不同。</p><p>数据链路层会将 0/1 打包成一个个的数据块，这些块被称为帧（Frame）。</p><p>在数据链路层中，通过 MAC 地址（Media Access Control address）来实现寻址。MAC 地址由设备厂商预先烧录在硬件上的地址，唯一标识这个设备。</p><p><img src="/courses/network/nics-and-switches-c.png" alt="网卡与交换机"></p><p>除了网卡，交换机也工作在数据链路层。交换机主要负责网络间的通信。</p><p>总而言之，数据链路层的功能就是负责将数据包从一个网卡传输到另一个网卡。或者说数据链路层负责逐跳的传输数据。</p><h2 id="第三层-网络层" tabindex="-1"><a class="header-anchor" href="#第三层-网络层" aria-hidden="true">#</a> 第三层：网络层</h2><p>网络层负责端到端的传输数据包。</p><p>网络层通过 IP 地址（Internet Protocol address）来确定网络中每一个节点的地址。</p><p>IP 地址是个逻辑地址，不与具体的设备永久绑定，这一点与 MAC 地址不同。</p><p><img src="/courses/network/router-c.png" alt="路由器"></p><p>路由器工作在网络层，它的主要职责是负责网络间的通信，是网络的边界。如果要与不在当前网络中的设备进行通信，则必须要使用路由器。</p><h2 id="第二层和第三层的区别" tabindex="-1"><a class="header-anchor" href="#第二层和第三层的区别" aria-hidden="true">#</a> 第二层和第三层的区别</h2><p>搞清楚第二层和第三层之间的交互和区别对于理解数据如何在网络节点之间传输非常重要。</p><p>比如，既然在数据链路层已经有了 MAC 地址，为什么还要在网络层中使用 IP 地址呢？</p><p>其实，网络层和数据链路层的分工不同：</p><ul><li>数据链路层使用 MAC 地址来逐跳的传输数据。</li><li>网络层使用 IP 地址来实现端到端的数据传输。</li></ul><p>当网络中的一个节点要发送数据的时候，会将源节点 IP 和目标节点 IP 都封装在数据包的 IP 头中。</p><p>IP 头和数据将会被进一步的封装在 MAC 地址头中，这个地址头同时还封装了当前跳和下一跳的 MAC 地址。</p><p><img src="/courses/network/l2-vs-l3-c.gif" alt="数据传输展示"></p><p>注意，在每个路由器之间，MAC 地址头都被解开，然后在发往下一跳的时候重新封装。IP 头只会在最终目的节点被解开。也就是说 IP 负责端到端的数据传输，而 MAC 负责逐跳传输数据。</p><h2 id="第四层-传输层" tabindex="-1"><a class="header-anchor" href="#第四层-传输层" aria-hidden="true">#</a> 第四层：传输层</h2><p>传输层负责处理网络中的数据流。</p><p>在已经连接到网络中的计算机上，同一时间可能同时运行着浏览器、音乐播放器、即时通讯系统比如微信等。每一个应用都是从网络上读写数据。</p><p>如何来区分哪一个数据流是浏览器的，哪一段数据流是音乐播放器的呢？</p><p><img src="/courses/network/layer4-c.png" alt="传输层"></p><p>第四层通过端口号来实现数据流的区分。</p><p>在网络层中，有两种协议，TCP 协议（Transmission Control Protocol）和 UDP 协议（User Datagram Protocol）。</p><p>TCP 和 UDP 都有 65536 个端口可供使用。每个应用数据流的 IP 报文中都含有源节点和目标节点的端口号。</p><p>TCP 和 UDP 使用不同的机制来传输数据，本文不做详细讨论。</p><p>总而言之，如果数据链路层负责逐跳传输数据，网络层负责端到端传输数据，那么传输层则是负责服务到服务的传输数据。</p><h2 id="第五、六、七层" tabindex="-1"><a class="header-anchor" href="#第五、六、七层" aria-hidden="true">#</a> 第五、六、七层</h2><p>会话层、表示层和应用层负责对网络上传输过来的数据进行最后的处理。</p><p>站在网络传输的角度上来看，第五、六、七层已经不是十分重要，在 <a href="https://zh.wikipedia.org/wiki/TCP/IP" target="_blank" rel="noopener noreferrer">TCP/IP 模型<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 中更是将这三层合并成了一层。</p><p>本文不对这三层做特别说明。</p><h2 id="封装与解封装" tabindex="-1"><a class="header-anchor" href="#封装与解封装" aria-hidden="true">#</a> 封装与解封装</h2><p>最后，我们要说一下在数据传输过程中的封装与解封装。</p><p>在网络中，数据会被逐层处理。在发送端，数据在被从上到下逐层处理的过程中，每一层都会添加额外的信息来实现这一层的功能，知道最终这些数据被转换成 0/1 比特流发送出去。</p><p>比如：</p><ul><li>传输层会向数据包中添加 TCP 头，里面包含源节点和目标节点的端口。</li><li>网络层会向数据包中添加 IP 头，里面包含源节点和目标节点的 IP 地址。</li><li>数据链路层会向数据包中添加以太网头，里面包含源节点和目标节点的 MAC 地址。</li></ul><p>当数据到达接收端后，每一层的都会解封装数据包，移除这一层的头，然后将剩余的数据包往上层传递，直到应用层。</p><p>下图展示了数据包封装与解封装的过程。</p><p><img src="/courses/network/encap-decap-c.gif" alt="封装与解封装"></p><p>注意，上图仅仅是一个示例，具体每一层添加什么样的头会根据该层的通信协议确定。</p><p>总而言之，数据在传输过程中，先在发送端从上到下进行封装，每一层都会加上特定的头，直到最终数据被以 0/1 比特流的形式写入传输媒介中传输。数据到达接收端之后，会从下到上逐层去除之前加上的头，最终数据被传递给应用层使用。</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2><ul><li><a href="https://zh.wikipedia.org/wiki/OSI%E6%A8%A1%E5%9E%8B" target="_blank" rel="noopener noreferrer">OSI 模型<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><div style="display:flex;align-items:center;justify-content:center;"><p style="text-align:center;margin-top:10px;color:#999;"><img src="/qrcode-c.jpg" style="width:200px;height:200px;display:block;margin:10px auto;opacity:0.8;">关注微信公众号，获取最新推送~</p><p style="text-align:center;margin-top:10px;color:#999;"><img src="/card-c.jpeg" style="width:200px;height:200px;display:block;margin:10px auto;opacity:0.8;">加微信，深入交流~</p></div><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main></div><!----><!----><!--]--></div>
    <script src="/assets/js/runtime~app.fa50ff6a.js" defer></script><script src="/assets/js/3767.b5b9e7ce.js" defer></script><script src="/assets/js/app.8de2a662.js" defer></script>
  </body>
</html>
